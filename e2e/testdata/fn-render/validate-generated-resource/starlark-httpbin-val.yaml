apiVersion: fn.kpt.dev/v1alpha1
kind: StarlarkRun
metadata:
  name: httpbin-val
source: |-
  def contains_httpbin_resource(resource_list):
    for r in resource_list["items"]:
      if r["metadata"]["name"] == "httpbin" and r["kind"] == "Deployment":
        return
    fail("could not find httpbin deployment")
  contains_httpbin_resource(ctx.resource_list)
