
apiVersion: fn.kpt.dev/v1alpha1
kind: StarlarkRun
metadata:
  name: httpbin-gen
source: |
  # filter to return if resource is HTTPBin resource
  def isHTTPBin(r):
    return r["apiVersion"] == "apps/v1" and
    r["kind"] == "Deployment" and r["metadata"]["name"] == "httpbin"

  # filter out the httpbin deployment
  ctx.resource_list["items"] = [r for r in ctx.resource_list["items"] if not isHTTPBin(r)]
