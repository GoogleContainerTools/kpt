apiVersion: kpt.dev/v1alpha2
kind: FunctionResultList
metadata:
  name: fnresults
exitCode: 1
items:
- image: gcr.io/kpt-fn/enforce-gatekeeper:unstable
  exitCode: 0
  results:
  - file:
      index: 4
      path: resources.yaml
    message: |-
      The following banned keys are being used in the ConfigMap: {"private_key"}
      violatedConstraint: no-secrets-in-configmap
    resourceRef:
      apiVersion: v1
      kind: ConfigMap
      metadata:
        name: some-secret
        namespace: default
    severity: warning
  - file:
      index: 4
      path: resources.yaml
    message: |-
      The following banned keys are being used in the ConfigMap: {"less_sensitive_key"}
      violatedConstraint: no-sensitive-data-in-configmap
    resourceRef:
      apiVersion: v1
      kind: ConfigMap
      metadata:
        name: some-secret
        namespace: default
    severity: info
- image: gcr.io/kpt-fn/kubeval:unstable
  exitCode: 1
  results:
  - field:
      path: selector
    file:
      path: resources.yaml
    message: selector is required
    resourceRef:
      apiVersion: apps/v1
      kind: Deployment
    severity: error
  - field:
      path: template
    file:
      path: resources.yaml
    message: template is required
    resourceRef:
      apiVersion: apps/v1
      kind: Deployment
    severity: error
  - field:
      path: spec.replicas
    file:
      path: resources.yaml
    message: 'Invalid type. Expected: [integer,null], given: string'
    resourceRef:
      apiVersion: apps/v1
      kind: Deployment
    severity: error
